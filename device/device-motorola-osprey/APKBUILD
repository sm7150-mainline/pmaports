# Reference: <https://postmarketos.org/devicepkg>
# Contributor: Attila Szöllősi <ata@openmailbox.org>
pkgname=device-motorola-osprey
pkgver=1
pkgrel=12
pkgdesc="Motorola Moto G 3rd gen. (2015)"
url="https://postmarketos.org"
arch="armhf"
license="MIT"
depends="postmarketos-base linux-motorola-osprey mkbootimg mesa-dri-swrast"
makedepends="devicepkg-dev"
source="deviceinfo initfs-hook.sh 90-android-touch-dev.rules fb-workaround.sh"
options="!check !archcheck"

build() {
	devicepkg_build $startdir $pkgname
}

package() {
	devicepkg_package $startdir $pkgname
	install -D -m644 "$srcdir"/90-android-touch-dev.rules \
		"$pkgdir"/etc/udev/rules.d/90-android-touch-dev.rules
	install -D -m644 "$srcdir"/fb-workaround.sh \
		"$pkgdir"/etc/profile.d/00-fb-workaround.sh
}

sha512sums="31534e75eec2a849bcee88f95dc8040c1f2ba8c6ab167387161149a8446faf27c59becd210f027b84697ea0e0242d884842458623ca77d0a7c214db8580bfd20  deviceinfo
3e9d6bf1bd45328104b91b724472ac0e39cb595fb87f84b6793527019477a73234ae37d33e99419bc5810c018402ea6e68e76c26ace112ee11efc416ac0a7398  initfs-hook.sh
60597699b58aca14a1696329eba4ffb46d98c721d442fb024752e3301ea992ac1727d4609083a299573115288d2039c17831e7c70c2ffdd195a3c20323e6b5fb  90-android-touch-dev.rules
857da7bfe3a44d960ca1c05f8646eedd16140fa339f3b0421353f6cdb4b42f8e5c6457522e70c2eb2f76717404c688c0d92525b9d1e99895f3febb5ae3687420  fb-workaround.sh"
